#SPDX-License-Identifier: MIT-0
---
# defaults file for roles/ufw

# --- Package Settings ---

# ufw_pkg_name: APT package name for UFW
ufw_pkg_name: ufw

# ufw_update_cache: Update APT cache before install
ufw_update_cache: true

# ufw_config_path: Path to UFW configuration file
ufw_config_path: /etc/default/ufw

# --- UFW State ---

# ufw_state: Final UFW state ('enabled', 'disabled', 'reset')
ufw_state: enabled

# ufw_reset_before_configure: Reset UFW before applying rules
# WARNING: Set to true only for initial setup - wipes ALL existing rules
ufw_reset_before_configure: false

# --- Network Settings ---

# ufw_enable_ipv6: Enable IPv6 support in UFW
ufw_enable_ipv6: false

# ufw_logging: UFW logging level ('on', 'off', 'low', 'medium', 'high', 'full')
ufw_logging: "on"

# --- Default Policies (Secure by Default) ---

# ufw_default_policies: Default traffic policies
# direction: incoming, outgoing, routed
# policy: allow, deny, reject
ufw_default_policies:
  - direction: incoming
    policy: deny
  - direction: outgoing
    policy: allow

# --- Firewall Rules ---

# ufw_rules: List of firewall rules to configure
# Required: rule (allow, deny, reject, limit)
# Optional: port, proto, name, comment, from_ip, to_ip, interface
ufw_rules: []
# Examples:
# ufw_rules:
#   - rule: limit
#     port: 22
#     proto: tcp
#     comment: "Rate limit SSH"
#   - rule: allow
#     name: "OpenSSH"
#     comment: "Allow SSH via app profile"
#   - rule: allow
#     port: 80
#     proto: tcp
#     comment: "Allow HTTP"
#   - rule: allow
#     port: 443
#     proto: tcp
#     comment: "Allow HTTPS"
#   - rule: allow
#     port: 22
#     proto: tcp
#     from_ip: "192.168.1.0/24"
#     comment: "Allow SSH from local network only"
#   - rule: allow
#     port: 80
#     proto: tcp
#     interface: eth0
#     direction: in
#     comment: "Allow HTTP on eth0 only"

# --- Docker Integration ---

# ufw_docker_integration: Manage DOCKER-USER chain for Docker + UFW coexistence
# Docker bypasses UFW by manipulating iptables directly. When enabled, this
# configures the DOCKER-USER chain to restrict external access to Docker ports
# while allowing LAN access.
# IMPORTANT: Run UFW role AFTER Docker is installed for DOCKER-USER chain to exist.
ufw_docker_integration: false

# ufw_docker_allowed_ports: Ports accessible from the internet (not just LAN)
# All other Docker-published ports will only be accessible from private networks.
# Format: list of {port, proto} dicts
ufw_docker_allowed_ports: []
  # - { port: 80, proto: tcp }
  # - { port: 443, proto: tcp }
  # - { port: 443, proto: udp }

# ufw_docker_private_networks: Networks considered "private" (LAN)
# Traffic from these networks is always allowed to Docker containers.
# Default includes Docker internal networks and typical home LANs.
ufw_docker_private_networks:
  - 172.16.0.0/12
  - 192.168.0.0/16
  # Add 10.0.0.0/8 if you use VPNs (Tailscale, WireGuard) or Kubernetes
  # - 10.0.0.0/8
